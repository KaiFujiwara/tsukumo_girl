# 技術選定検討資料

最終更新: 2026-02-01

## 目次
1. [検討背景](#検討背景)
2. [キャラクター描画技術の比較](#キャラクター描画技術の比較)
3. [モバイルプラットフォームの比較](#モバイルプラットフォームの比較)
4. [組み合わせ評価](#組み合わせ評価)
5. [最終推奨案](#最終推奨案)

---

## 検討背景

### プロジェクトの性質
- **コアコンセプト**: バーコードスキャン → AI美少女生成 → コミュニケーション → 好感度システム
- **ゲーム性**: キャラクター収集、育成、所有権争奪
- **将来の拡張性**: ゲーム的な演出・機能の追加可能性あり

### 技術的要求
- バーコードスキャン機能（必須）
- キャラクター表示・アニメーション
- チャットUI
- 好感度システム（数値管理・演出）
- API通信（Go backend）
- プッシュ通知

---

## キャラクター描画技術の比較

### 1. PNGTuber方式 ⭐ 推奨

**概要**: 複数のPNG画像（表情差分）を切り替えて表示

| 項目 | 評価 |
|------|------|
| **ライセンス** | 🟢 無料（ツール不要） |
| **AI生成との相性** | 🟢 完全自動化可能 |
| **実装難易度** | 🟢 非常に低い |
| **データサイズ** | 小〜中（透過PNG 4-12枚） |
| **モバイル対応** | ✅ 完全対応 |

**必要画像例**:
- normal.png（通常）
- happy.png（喜び）
- sad.png（悲しみ）
- angry.png（怒り）
- talking_1.png（口パク1）
- talking_2.png（口パク2）

**適用事例**: VTuber（veadotube mini）、配信

---

### 2. Live2D Cubism

**概要**: 1枚のイラストから立体的で滑らかな動きを生成

| 項目 | 評価 |
|------|------|
| **ライセンス** | 🔴 個人: ¥5,280/月 or ¥52,800/年<br>商用: 数十万円/年〜 |
| **AI生成との相性** | 🔴 手動でパーツ分け・リギング必須 |
| **実装難易度** | 🔴 高い |
| **データサイズ** | 中（3-10MB/モデル） |
| **モバイル対応** | ✅ 良好 |

**適用事例**: ブルーアーカイブ、プリコネ、VTuber

**結論**: ライセンス費用・実装コスト共に高く、本プロジェクトには不向き

---

### 3. Spine 2D

**概要**: ボーン制御でダイナミックなアニメーション

| 項目 | 評価 |
|------|------|
| **ライセンス** | 🟡 Essential: $69（買い切り）<br>Professional: $319 |
| **AI生成との相性** | 🟡 パーツ分け・ボーン設定が必要 |
| **実装難易度** | 🟡 中〜高 |
| **データサイズ** | 小（ボーンデータのみ） |

**適用事例**: アークナイツ、メルスト

---

### 4. その他（参考）

- **E-mote**: テンプレート方式、個人利用は無料
- **Lottie**: After Effects必須、UI演出向け
- **DragonBones**: 無料だがメンテナンス停滞
- **VRM (3D)**: モバイルパフォーマンス的に不向き

---

## モバイルプラットフォームの比較

### 1. React Native + Expo（現行）

| 項目 | 評価 |
|------|------|
| **言語** | TypeScript / JavaScript |
| **学習コスト** | 🟢 既存知識活用可 |
| **2Dゲーム性能** | 🟡 Skiaで軽量ゲーム可 |
| **バーコード** | ✅ expo-camera |
| **開発期間** | 2-3ヶ月 |
| **APKサイズ** | 25-40MB |

**メリット**:
- ✅ 既存のTypeScript/React知識活用
- ✅ 最速開発
- ✅ バーコードスキャン実績あり
- ✅ React Native Skia（2025年）で性能向上

**デメリット**:
- ⚠️ ゲーム的な演出に限界
- ⚠️ 大規模ゲーム拡張は困難

**適用例**: PNGTuber実装、ノベルゲーム程度

---

### 2. Flutter + Flame ⭐ 推奨

| 項目 | 評価 |
|------|------|
| **言語** | Dart |
| **学習コスト** | 🟡 Dart習得必要（1-2週間） |
| **2Dゲーム性能** | 🟢 Flameエンジンで高性能 |
| **バーコード** | ✅ mobile_scanner |
| **開発期間** | 3-4ヶ月 |
| **APKサイズ** | 30-50MB |

**メリット**:
- ✅ UIとゲームエンジンの両立
- ✅ ゲーム実績あり（5万DL達成事例）
- ✅ 統一されたエコシステム
- ✅ 将来のゲーム拡張が自然
- ✅ Skia（独自レンダラー）で高速描画

**デメリット**:
- ⚠️ Dart学習コスト
- ⚠️ React/TypeScript資産を捨てる

**リリース済みゲーム事例**:
- ペコシュー（横シューティング）
- 論破王（メッセージ選択型）
- 5万DLのパズルゲーム（広告収益化成功）

**適用分野**: ハイパーカジュアル、パズル、2Dプラットフォーマー、カードゲーム

---

### 3. Godot Engine

| 項目 | 評価 |
|------|------|
| **言語** | GDScript / C# / C++ |
| **学習コスト** | 🟡 中〜高 |
| **2Dゲーム性能** | 🟢 非常に高速・軽量 |
| **バーコード** | 🔴 プラグイン必要（要調査） |
| **開発期間** | 4-6ヶ月 |
| **APKサイズ** | 15-25MB（最小） |
| **ライセンス** | 🟢 MIT（完全無料） |

**メリット**:
- ✅ 本格的な2Dゲームエンジン
- ✅ 完全無料（MITライセンス）
- ✅ 演出・拡張性は最高
- ✅ APKサイズ最小

**デメリット**:
- ⚠️ UIはゲームエンジン的
- ⚠️ バーコードスキャンプラグイン要調査
- ⚠️ 実用機能（認証、通知）の実装が大変

**適用**: 完全にゲームとして作る場合

---

### 4. Unity（参考）

- ユーザー要望により除外
- APKサイズ大（50MB〜）
- 学習コスト高

---

## ハイブリッド構成の検討

### React Native + Godot

**ライブラリ**: `@borndotcom/react-native-godot`

**状況**:
- 🟡 2024-2025年にリリース（1年未満）
- 🟡 数百万ユーザー実績あり（Born社）
- 🔴 ドキュメント限定的
- 🔴 コミュニティ小

**アーキテクチャ**:
```
React Native（UI・ビジネスロジック）
  ↓
GodotView Component（ゲーム演出）
```

**結論**:
- ✅ 理論上は最適（UIとゲーム演出の分離）
- ⚠️ 本番運用リスク（新しすぎる）
- ⚠️ 複雑性が高い
- ⚠️ トラブルシューティング情報少ない

---

### Flutter + Godot

**ライブラリ**: `flutter_godot` / `FlutDot`

**状況**:
- 🔴 Android のみ対応
- 🔴 実験的プロジェクト
- 🔴 メンテナンス不明

**結論**: React Native + Godot より更に不安定、非推奨

---

## 組み合わせ評価マトリックス

| 描画方式 ↓ / プラットフォーム → | React Native | Flutter + Flame | Godot | ハイブリッド |
|:---|:---:|:---:|:---:|:---:|
| **PNGTuber** | ✅ 最適 | ✅ 最適 | ✅ 最適 | ✅ 可能 |
| **Spine** | 🟡 非公式 | ✅ 対応 | ✅ 公式 | ✅ 対応 |
| **Live2D** | 🟡 SDK統合 | 🟡 SDK統合 | 🟡 SDK統合 | 🟡 可能 |
| **AI生成との相性** | 🟢 | 🟢 | 🟢 | 🟢 |

### 技術スタック別評価

| 項目 | React Native | Flutter + Flame | Godot | ハイブリッド |
|------|-------------|----------------|-------|-------------|
| **安定性** | 🟢 高 | 🟢 高 | 🟢 高 | 🔴 低 |
| **開発期間** | 2-3ヶ月 | 3-4ヶ月 | 4-6ヶ月 | 4-5ヶ月 |
| **学習コスト** | 🟢 低 | 🟡 中 | 🟡 中〜高 | 🔴 高 |
| **将来の拡張** | 🔴 限定的 | 🟢 良好 | 🟢 優秀 | 🟢 理論上優秀 |
| **バーコード** | ✅ | ✅ | 🔴 | ✅ |
| **チャットUI** | ✅ | ✅ | 🟡 | ✅ |
| **ゲーム演出** | 🟡 | 🟢 | 🟢 | 🟢 |
| **本番実績** | 🟢 豊富 | 🟡 中 | 🟢 豊富 | 🔴 少 |

---

## 最終推奨案

### 🥇 第1推奨: Flutter + Flame

**採用理由**:

1. **UIとゲームの両立**
   - バーコードスキャン: ✅
   - チャット機能: ✅
   - ゲーム演出: ✅
   - 将来のミニゲーム追加: ✅

2. **実績と安定性**
   - App Store/Google Playでリリース実績多数
   - 5万DL達成事例あり
   - エコシステムが統一

3. **長期的な拡張性**
   - ゲーム要素の追加が自然
   - Flame標準機能（パーティクル、物理演算等）
   - Flutter自体の成長性

4. **開発効率**
   - ホットリロード
   - 豊富なパッケージ
   - ドキュメント充実

**デメリット**:
- Dart学習コスト（1-2週間）
- 既存TypeScript資産を活用できない

**推奨ケース**:
- ✅ 将来的にゲーム拡張を本気で考えている
- ✅ 3-4ヶ月の開発期間がある
- ✅ Dart学習に前向き
- ✅ 長期的に育てるプロダクト

---

### 🥈 第2推奨: React Native 単体

**採用理由**:

1. **最速開発**
   - 既存知識100%活用
   - 学習コストゼロ
   - 2-3ヶ月でMVPリリース

2. **技術的確実性**
   - バーコードスキャン実績（expo-camera）
   - React Native Skia（2025年）で性能向上
   - エコシステム成熟

3. **段階的アプローチ**
   - Phase 1: React Nativeで最小限スタート
   - Phase 2: ユーザー反応を見てFlutter移行判断

**デメリット**:
- ゲーム的演出に限界
- 大規模ゲーム拡張は困難

**推奨ケース**:
- ✅ まずMVPでマーケット検証したい
- ✅ 既存知識を活かしたい
- ✅ 2ヶ月以内のリリースが優先
- ✅ 実験的プロジェクト

**実装方針**:
- PNGTuber（表情差分6枚）
- React Native Reanimated（基本アニメーション）
- React Native Skia（パーティクル等の演出）

---

### 🥉 第3推奨: Godot 単体

**採用理由**:
- 完全なゲームとして作る場合
- 演出・拡張性を最重視
- 完全無料（MITライセンス）

**デメリット**:
- UIはゲームエンジン的
- バーコードプラグイン要調査
- 開発期間長い（4-6ヶ月）

**推奨ケース**:
- ✅ 「ゲーム」として割り切る
- ✅ UI/UXに妥協できる
- ✅ 4-6ヶ月かけても良い

---

### ❌ 非推奨: ハイブリッド構成

**理由**:
- React Native + Godot: まだ不安定（1年未満）
- Flutter + Godot: 実験的、Android のみ
- 複雑性が高い
- トラブルシューティング困難

**検討すべき状況**:
- react-native-godotが成熟した場合（2-3年後）
- ユーザー数が10万人を超えて大幅な演出強化が必要になった場合

---

## 判断フローチャート

```
Q1: 将来的にゲーム拡張したい？
  ├─ はい → Q2へ
  └─ いいえ、まずMVP → React Native 単体

Q2: 既存知識（TypeScript/React）を捨てられる？
  ├─ はい、Dart学習OK → Flutter + Flame 🥇
  └─ いいえ → Q3へ

Q3: React NativeのUI機能は必須？
  ├─ はい → Q4へ
  └─ いいえ、ゲーム重視 → Godot 単体

Q4: 本番運用リスクを承知できる？
  ├─ はい → React Native + Godot（非推奨）
  └─ いいえ → React Native 単体
```

---

## 段階的アプローチ（推奨）

### Phase 1: MVP（2-3ヶ月）

**選択肢A: React Native**
```
- PNGTuber実装
- 基本アニメーション（Reanimated）
- バーコードスキャン
- チャット機能
- ユーザーフィードバック収集
```

**選択肢B: Flutter + Flame**
```
- Dart学習（1-2週間）
- Flutter基礎（1週間）
- Flame統合（1週間）
- 本格実装（2ヶ月）
```

### Phase 2: 評価（3-6ヶ月）

**判断基準**:
- ユーザー数: 1万人以上？
- フィードバック: 「もっと演出が欲しい」が多い？
- 収益: 継続投資できる？

**選択**:
- React Nativeで十分 → 継続
- 演出強化必要 → Flutter/Godot への移行検討

### Phase 3: 拡張（6ヶ月〜）

- ミニゲーム追加
- 高度なエフェクト
- 3D要素（将来）

---

## ビルド・配信プロセス

### Flutter の場合

```bash
# Android
flutter build appbundle --release
# → build/app/outputs/bundle/release/app-release.aab

# iOS
flutter build ipa --release
# → build/ios/ipa/*.ipa
```

**配信**:
- Google Play: AABアップロード
- App Store: Xcode経由 or altool

**費用**:
- Google Play Developer: $25（買い切り）
- Apple Developer Program: ¥12,980/年

### React Native の場合

```bash
# Android
npx react-native build-android --mode=release

# iOS
npx react-native build-ios --mode=release
```

**配信**: Flutterと同様

---

## 次のステップ

### Flutter + Flame を選択した場合

1. **環境構築**（1日）
   - Flutter SDK インストール
   - Android Studio / Xcode セットアップ
   - VSCode拡張機能

2. **学習フェーズ**（2週間）
   - Dart基礎
   - Flutter基礎
   - Flame チュートリアル

3. **プロトタイプ開発**（1週間）
   - バーコードスキャン実装
   - PNGTuber表示
   - 基本UI

4. **本格実装**（2ヶ月）
   - AI統合
   - チャット機能
   - 好感度システム
   - エフェクト実装

### React Native を選択した場合

1. **Skia導入**（2-3日）
   ```bash
   npm install @shopify/react-native-skia
   ```

2. **PNGTuber実装**（1週間）
   - 表情差分切り替え
   - フェードアニメーション

3. **エフェクト追加**（1週間）
   - パーティクル（Skia）
   - 好感度上昇演出

4. **本格実装**（1.5ヶ月）

---

## 参考資料

### Flutter + Flame
- [Flame公式ドキュメント](https://docs.flame-engine.org/)
- [Flutter公式: ゲーム開発](https://flutter.dev/games)
- [Google Codelabs: Flutter Flame](https://codelabs.developers.google.com/codelabs/flutter-flame-game)

### React Native
- [React Native Skia](https://shopify.github.io/react-native-skia/)
- [Expo Camera](https://docs.expo.dev/versions/latest/sdk/camera/)

### Godot
- [Godot公式](https://godotengine.org/)
- [日本語ドキュメント](https://docs.godotengine.org/ja/4.x/)

---

## 意思決定履歴

| 日付 | 決定事項 | 理由 |
|------|---------|------|
| 2026-02-01 | 技術選定検討開始 | - |
| 2026-02-01 | Flutter + Flame を第1推奨とする | UIとゲームの両立、実績、拡張性 |
| 2026-02-01 | ハイブリッド構成を非推奨とする | 安定性リスク、複雑性 |

---

## 最終判断待ち

**選択肢**:
- A. Flutter + Flame で進める（推奨）
- B. React Native 単体でMVPから始める
- C. 追加調査・検討が必要

**次回アクション**:
- 選択した技術スタックの詳細実装設計
- プロジェクトセットアップ
- 開発環境構築手順書作成
